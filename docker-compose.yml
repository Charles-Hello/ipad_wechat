version: "2.2"

services:
  tinyproxy:
    image: dannydirect/tinyproxy:latest
    container_name: tinyproxy
    restart: unless-stopped
    ports:
      - "18838:8888"
    command:
      - ANY
    tty: false


  ipad_wechat:
    image: 1140601003/ipad_wechat
    container_name: ipad_wechat
    restart: unless-stopped
    ports:
      - "8022:22"
      - "30920:30920"
    environment:
      - QRCODE_PORT=30920 # 选择是否开启网页扫码端口(默认选择端口为：30920，如需更换请自行修改端口)
      - QRCODE_EMAIL # 选择是否开启邮箱接收(输入你的邮箱地址，邮箱默认为None(代表不发送，反之则一定执行邮箱发送图片)，例如：1140***@qq.com, "防伪字符串")
      - PROXY_IP_ADDRESS=106.53.99.58 # 输入你微信代理地区地址和端口(决定你的微信登录的城市)[ps:关于内网的话，需要找个公网穿透出来除非本身就是公网。]
      - PROXY_IP_PORT=18838
      - NOLAN_URL=http://api.nolankka.top:9898/api #诺兰的swagger接口地址
      - CALL_BACK_IP=http://106.53.99.58:12112  # 输入你的回调（接管信息）地址
    volumes:
      - ./ipad_wechat:/root/ipad_wechat/
    stdin_open: true
    tty: true
    depends_on:
      - tinyproxy